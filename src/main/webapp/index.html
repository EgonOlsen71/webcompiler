<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="robots" content="noindex">
		<link href="./style/default.css" rel="stylesheet" type="text/css">
		<script src="./assets/jquery.min.js"></script>
		<script src="./assets/js.cookie-2.2.1.min.js"></script>
		<script src="./assets/js.js"></script>
		<title>MOSpeed - Web edition</title>
	</head>
	<body class="mospeed">
		<div class="wrap">
			<header>
				<div class="container">
					<h1>
						<span class="logoMOSpeed">
							<svg viewBox="0 0 256.04121 35.43311" xmlns="http://www.w3.org/2000/svg" width="256" height="35">
								<path d="m0 35.43311v-27.82866c0-2.11234.73932-3.89274 2.21795-5.3412 1.47864-1.5088 3.27413-2.26321 5.38646-2.26321h20.22424c2.11234 0 3.89274.75441 5.3412 2.26322 1.50881 1.47864 2.26322 3.25903 2.26322 5.3412v27.82866h-9.41499v-26.01809h-3.59405v26.01808h-9.41499v-26.01808h-3.59405v26.01808z"/>
								<path d="m46.63154 35.43311c-2.14251 0-3.938-.73932-5.38646-2.21795-1.47864-1.50881-2.21795-3.3043-2.21795-5.38646v-20.22425c0-2.11234.73932-3.89274 2.21795-5.3412 1.47863-1.5088 3.27412-2.26321 5.38646-2.26321h17.38152c2.11234 0 3.89274.75441 5.3412 2.26322 1.50881 1.47864 2.26322 3.25903 2.26322 5.3412v20.22424c0 2.14251-.75441 3.95309-2.26322 5.43172-1.50881 1.44846-3.28921 2.17269-5.3412 2.17269zm15.57094-9.41499v-16.60309h-13.76037v16.60309z"/>
								<path d="m82.8159 22.42407h15.57098v.00098h9.41498v-1.81158c0-2.08215-.75439-3.86255-2.26324-5.34119-1.44843-1.50879-3.22882-2.26318-5.34119-2.26318h-15.57092v-3.59406h23.17535v-9.41504h-24.98596c-2.1123 0-3.90778.75446-5.38641 2.26324-1.47864 1.44849-2.21796 3.22888-2.21796 5.34119v7.21521c0 2.08215.73932 3.87762 2.21796 5.38647 1.44843 1.47864 3.24396 2.21796 5.38641 2.21796z"/>
								<path d="m89.6845 26.0191v-.00098h-14.47296v9.41498h24.9859c2.052 0 3.8324-.72424 5.34119-2.17273 1.50885-1.47858 2.26324-3.28918 2.26324-5.4317v-1.80957z"/>
								<path d="m184.59789 26.0191-.25433 1.80957c-.29266 2.08215.19434 3.87762 1.46094 5.38647 1.24066 1.47864 2.93225 2.21796 5.07477 2.21796h24.9859l1.32306-9.414h-32.59033z"/>
								<path d="m148.4135 26.0191-.25433 1.80957c-.29266 2.08215.19434 3.87762 1.46094 5.38647 1.24066 1.47864 2.93219 2.21796 5.07471 2.21796h24.98596l1.32306-9.414h-32.59033z"/>
								<path d="m112.22905 26.0191-1.32306 9.41401h9.41504l1.32306-9.41401z"/>
								<path d="m130.90605 9.414h16.24725l.25415-1.80823c.2926-2.08215-.21161-3.86255-1.51257-5.34119-1.23645-1.50878-2.91082-2.26324-5.02313-2.26324h-24.98596l-1.32288 9.41266z"/>
								<path d="m137.2332 13.00806-.00031.00238h-13.76038l.00031-.00238h-9.41498l-1.32367 9.41833h9.41504l.00012-.00098h15.57092c2.052 0 3.93414-.72424 5.64655-2.17273 1.71661-1.47864 2.72546-3.28918 3.02661-5.4317l.25482-1.81293h-9.41504z"/>
								<path d="m255.70629 9.414.25433-1.80957c.2926-2.08215-.21155-3.86255-1.51257-5.34119-1.23639-1.50879-2.91077-2.26324-5.02313-2.26324h-24.9859l-1.32306 9.414z"/>
								<path d="m245.78624 13.00806-1.82849 13.01007h-4.64532v.00098h-18.53015l-1.32306 9.414h24.9859c2.052 0 3.9342-.72424 5.64655-2.17273 1.71667-1.47858 2.72552-3.28918 3.02661-5.4317l2.08289-14.82062h-9.41492z"/>
								<path d="m232.02587 13.00806h-9.41498l-1.32349 9.41699h9.41498z"/>
								<path d="m195.84142 13.00806h-9.41492l-1.32349 9.41699h9.41498l.00012-.00098h16.91126l1.32318-9.41498h-16.91126z"/>
								<path d="m191.70812 9.414h27.81378l1.32306-9.414h-24.98596c-2.1123 0-4.01379.75446-5.70453 2.26324-1.68219 1.44849-2.67169 3.22888-2.96857 5.34119l-.25433 1.80957z"/>
								<path d="m161.70812 9.414h21.62939l1.32306-9.414h-24.98596c-2.1123 0-4.01385.75446-5.70453 2.26324-1.68219 1.44849-2.67175 3.22888-2.96863 5.34119l-.25433 1.80957z"/>
								<path d="m159.65703 13.00806h-9.41498l-1.32348 9.41699h9.41503l.00013-.00098h16.91125l1.32318-9.41498h-16.91125z"/>
							</svg>
						</span>
						<span class="name">
							MOSpeed
						</span>
						<small>
							Web edition
						</small>
					</h1>
				</div>
			</header>
			<main>
				<section class="description">
					<div class="container">
						<header>
							<h2>What is MOSpeed - Web edition?</h2>
						</header>
						<p>
							This is an experimental web version of <a href="https://www.c64-wiki.com/wiki/MOSpeed" target="_blank">MOSpeed</a>, an optimizing cross compiler for Commodore BASIC V2.
							It can compile BASIC V2 source code into executables for the C64, the VIC20 and the Commander X16.
							It takes either text or PRG files as input.
						</p>
						<p>
							For convenience, the configuration will be saved in a cookie on your computer at each compile.
							Depending on how many files you compile in one go and on your configuration, you'll either get a PRG file
							or a ZIP file after the compilation.
						</p>
						<p>
							Source code and compiled files will only be stored during the compilation and will be deleted once your download starts.
						</p>
						<p>
							<b>Please note:</b> This server runs on a Raspberry Pi 4. So please don't expect great performance out of it.<br>
							MOSpeed will most likely run much faster on your local PC.
						</p>
						<!--
							<p>
								<b>Please don't bookmark this page, as the IP can change every now and then.<br>Use <a href="https://jpct.de/mospeed" target="_blank">https://jpct.de/mospeed</a> instead.</b>
							</p>
						-->
					</div>
				</section>
				<section class="convert">
					<div class="container">
						<form id="myform" method="post" name="myform" target="compiletarget" action="/WebCompiler/Compile">
							<div class="uploadWrap">
								<div>
									<div class="uploadform form-control well">
										<span class="uploadmsg">Drag and drop file here...</span>
									</div>
								</div>
								<div>
									<p class="label">...or select one:</p>
									<iframe class="uploadFrame" src="upload.html"></iframe>
								</div>
							</div>
							<div id="uploaded">
								<div>
									<label>Uploaded files:</label>
								</div>
								<ul id="uploadedfiles"></ul>
								<span id="hiddennames"></span>
							</div>
							<div class="formAction">
								<input class="btn btn-secondary reset" type="button" value="Reset configuration" onclick="resetConfiguration()">
								<input class="btn uploadbutton" type="button" value="Compile files" onclick="compile()">
							</div>
							<div class="spaceman"></div>
							<h3>Compiler configuration</h3>
							<!--
								<input id="savebutton" class="btn uploadbutton" type="button" value="Save configuration" onclick="saveConfiguration()">
							-->
							<fieldset>
								<legend class="h4">Platform configuration</legend>
								<div>
									<label class="label" for="platform">Target platform:</label>
									<select id="platform" class="form-control" name="platform">
										<option value="c64">C64</option>
										<option value="vic20">VIC 20/VC 20</option>
										<option value="x16">Commander X16 (r38)</option>
									</select>
								</div>
								<div id="memselect" style="display:none">
									<label class="label" for="memconfig">Select memory configuration:</label>
									<select id="memconfig" class="form-control" name="memconfig">
										<option value="0">No expansion</option>
										<option value="3">3K expansion</option>
										<option value="8">8K+ expansion</option>
									</select>
								</div>
								<div id="ram">
									<p class="label">RAM usage:</p>
									<div class="form-check">
										<input type="checkbox" id="bigram" name="bigram" value="1">
										<label class="label" for="bigram">Use hidden RAM (slower!)</label>
									</div>
								</div>
								<div id="x16" style="display: none;">
									<!--
										x16 placeholder
									-->
								</div>
								<div class="input_group">
									<p class="label">Program start:</p>
									<div class="form-check">
										<input class="input-radio" type="radio" id="progstart1" checked="checked" name="progstartdefault" value="1">
										<label class="radiolabel" for="progstart1">Default</label>
									</div>
									<div class="form-check">
										<input class="input-radio" type="radio" id="progstart2" name="progstartdefault" value="0">
										<label class="radiolabel" for="progstart2">...other address</label>
									</div>
									<input class="form-control" placeholder="start address (decimal or hex)" id="progstart" type="text" name="progstart" style="display:none">
								</div>
								<div class="input_group">
									<p class="label">Variable start:</p>
									<div class="form-check">
										<input class="input-radio" type="radio" id="varstart1" checked="checked" name="varstartdefault" value="1">
										<label class="radiolabel" for="varstart1">Default</label>
									</div>
									<div class="form-check">
										<input class="input-radio" type="radio" id="varstart2" name="varstartdefault" value="0">
										<label class="radiolabel" for="varstart2">...other address</label>
									</div>
									<input class="form-control" placeholder="start address (decimal or hex)" id="varstart" type="text" name="varstart" style="display:none">
								</div>
								<div class="input_group">
									<p class="label">String memory end:</p>
									<div class="form-check">
										<input class="input-radio" type="radio" id="varend1" checked="checked" name="varenddefault" value="1">
										<label class="radiolabel" for="varend1">Default</label>
									</div>
									<div class="form-check">
										<input class="input-radio" type="radio" id="varend2" name="varenddefault" value="0">
										<label class="radiolabel" for="varend2">...other address</label>
									</div>
									<input class="form-control" placeholder="end address (decimal or hex)" id="varend" type="text" name="varend" style="display:none">
								</div>
								<div class="input_group ">
									<p class="label">Runtime start:</p>
									<div class="form-check">
										<input class="input-radio" type="radio" id="runtimestart1" checked="checked" name="runtimestartdefault" value="1">
										<label class="radiolabel" for="runtimestart1">Default</label>
									</div>
									<div class="form-check">
										<input class="input-radio" type="radio" id="runtimestart2" name="runtimestartdefault" value="0">
										<label class="radiolabel" for="runtimestart2">...other address</label>
									</div>
									<input class="form-control" placeholder="start address (decimal or hex)" id="runtimestart" type="text" name="runtimestart" style="display:none">
								</div>
							</fieldset>
							<fieldset>
								<legend class="h4">Compiler configuration</legend>
								<div id="compact">
									<label class="label" for="compactlevel">Compact level:</label>
									<select id="compactlevel" class="form-control" name="compactlevel">
										<option value="0">Default (fastest)</option>
										<option value="5">Medium (slower)</option>
										<option value="4">High (even slower)</option>
										<option value="3">Highest (slowest)</option>
									</select>
								</div>
								<div id="sourcy">
									<label class="label" for="source">Source code processing:</label>
									<select id="source" class="form-control" name="source">
										<option value="none">None</option>
										<option value="tolower">Convert to lower case</option>
										<option value="flipcase">Flip lower/higher case</option>
									</select>
								</div>
								<div id="loopsy">
									<label class="label" for="loops">Loop handling:</label>
									<select id="loops" class="form-control" name="loops">
										<option value="0">Remove empty loops</option>
										<option value="1">Retain empty loops</option>
									</select>
								</div>
								<div id="export">
									<label class="label" for="multipart">Linker:</label>
									<div class="form-check">
										<input type="checkbox" id="multipart" name="multipart" value="1">
										<label class=" checkboxlabel" for="multipart">Split into multiple files</label>
									</div>
								</div>
								<div id="memholes">
									<label class="label" for="memholestart">Memory holes / locked regions:</label>
									<ol>
										<li class="form-group-range">
											<div>
												<input id="memholestart" class="form-control" placeholder="start address (decimal or hex)" type="text" name="memholestart[]">
											</div>
											<div>
												<input id="memholeend" class="form-control" placeholder="end address (decimal or hex)" type="text" name="memholeend[]">
											</div>
										</li>
									</ol>
									<div class="addInputRange">
										<button type="button" id="addhole" class="btn" onclick="addMemoryHole()">Add memory hole</button>
									</div>
								</div>
							</fieldset>
							<div class="formAction">
								<input class="btn btn-secondary reset" type="button" value="Reset configuration" onclick="resetConfiguration()">
								<input class="btn uploadbutton" type="button" value="Compile files" onclick="compile()">
							</div>
						</form>
					</div>
				</section>
				<section class="result">
					<div id="output" style="display:none;">
						<pre class="console" id="console">Compiling...</pre>
						<hr>
						<div id="failed" style="display:none;"><h2>Compilation failed...please see console output for more details!</h2></div>
						<input id="runagain" class="btn uploadbutton" type="button" style="display:none;" value="Compile more files" onclick="document.location=document.location">
					</div>
					<iframe id="compiletarget" name="compiletarget" src="empty.html" style="display:none;"></iframe>
				</section>
			</main>
		</div>
	</body>
</html>
